{% extends 'common/panel.html' %}

{% load percentage %}
{% load humanize %}

{% block title %}Area of Interest Biological Conservation Report{% endblock %}
{% block panel %}

<script type="text/javascript" charset="utf-8">
    lingcod.onShow(function(){
        $('img.info').each( function() {
            var id = $(this).attr('id');
            var text = "none";
            topMiddle = false;
            topLeft = false;
            topRight = false;
            switch(id) {
                //Conservation Biological Reports
                //Physical
                case 'info_seabirds':
                    topMiddle = true;
                    text  = "Reports number of birds within your Area of Interest by species type, based on Seabird Colonies layer, WDFW, 2006.";
                    break;
                case 'info_snowyplover':
                    topLeft = true;
                    text  = "Reports area within your Area of Interest and calculates percentage of Area of Interest, based on Snowy Plover Critical Habitat layer, USFWS, 2012.";
                    break;
                case 'info_haulouts':
                    topMiddle = true;
                    text  = "Reports number of seals and sea lions within your Area of Interest by species type, based on Seal/Sea Lion Haulout layer, WDFW, 2000.";
                    break;
                case 'info_orca':
                    topMiddle = true;
                    text  = "Reports area within your Area of Interest and calculates percentage of Area of Interest, based on Southern Resident Killer Whale Critical Habitat layer, NOAA NMFS, 2012.";
                    break;
                case 'info_kelp':
                    topMiddle = true;
                    text  = "Reports area within your Area of Interest and calculates percentage of Area of Interest, based on Kelp layer, WA DNR, 2011.";
                    break;
                case 'info_chlorophyll':
                    topMiddle = true;
                    text  = "Reports area for chlorophyll by type within your Area of Interest and  calculates percentage of total available by type, based on Chlorophyll layer, TNC, 2011.";
                    break;
                case 'info_coral':
                    topMiddle = true;
                    text  = "Reports area and average catch per unit effort (CPUE) by coral type within your Area of Interest, based on Corals layer, NOAA NMFS and TNC 2006.";
                    break;
                case 'info_sponges':
                    topMiddle = true;
                    text  = "Reports area and average catch per unit effort (CPUE) by sponge type within your Area of Interest, based on Sponges layer, NOAA NMFS and TNC 2006.";
                    break;
                case 'info_oysters':
                    topMiddle = true;
                    text  = "Reports area within your Area of Interest and calculates percentage of Area of Interest, based on Olympia Oyster layer, WDFW, 2006.";
                    break;
                default:
                    $(this).hide();
            }
            if (text!='none' && topMiddle) {
                $(this).qtip({
                    content: text, 
                    show: { 
                        delay: 0,
                        when: { event: 'mouseover' } 
                    },
                    position: {
                        corner: {
                            target: 'topMiddle',
                            tooltip: 'bottomMiddle'
                        }
                    },
                    hide: { when: {event: 'mouseleave'} },
                    style: { 
                        width: 320,
                        name: 'blue' 
                    }
                });
            } else if (text!='none' && topLeft) {
                $(this).qtip({
                    content: text, 
                    show: { 
                        delay: 0,
                        when: { event: 'mouseover' } 
                    },
                    position: {
                        corner: {
                            target: 'topRight',
                            tooltip: 'bottomRight'
                        }
                    },
                    hide: { when: {event: 'mouseleave'} },
                    style: { 
                        width: 300,
                        name: 'blue' 
                    }
                });
            } else if (text!='none' && topRight) {
                $(this).qtip({
                    content: text, 
                    show: { 
                        delay: 0,
                        when: { event: 'mouseover' } 
                    },
                    position: {
                        corner: {
                            target: 'topLeft',
                            tooltip: 'bottomLeft'
                        }
                    },
                    hide: { when: {event: 'mouseleave'} },
                    style: { 
                        width: 270,
                        name: 'blue' 
                    }
                });
            } else if (text!='none') {
                $(this).qtip({
                    content: text, 
                    show: { 
                        delay: 0,
                        when: { event: 'mouseover' } 
                    },
                    position: {
                        corner: {
                            target: 'rightMiddle',
                            tooltip: 'leftMiddle'
                        }
                    },
                    hide: { when: {event: 'mouseleave'} },
                    style: { 
                        width: 270,
                        name: 'blue' 
                    }
                });
            }
        });             
        
    });
    
</script>

<div class='freetext'>

<h3>Birds</h3>
<p>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Seabirds</b>
                <img src="/media/wmm/img/info.png" id="info_seabirds" class="info"/>
            </td>
            <td></td>
        </tr>
        {% if seabird_count > 0 %}
        {% for tuple in seabirds %}
        <tr>
            <td></td>
            <td>{{tuple.0}} ({{tuple.1|intcomma}}) </td>
            <td></td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td></td>
            <td>None Found</td>
            <td></td>
        </tr>
        {% endif %}
    </tbody>
</table>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Snowy Plover Critical Habitats</b>
                <img src="/media/wmm/img/info.png" id="info_snowyplover" class="info"/>
            </td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            {% if snowy_plover_count == 0 %}
            <td>None Found</td>
            {% else %}
            <td>{{snowy_plover_area|floatformat:1}} sq miles ({{snowy_plover_perc|percentage:1}} of your Area)</td>
            {% endif %}
            <td></td>
        </tr>
    </tbody>
</table>

<h3>Marine Mammals</h3>
<p>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Seals/Sealions</b>
                <img src="/media/wmm/img/info.png" id="info_haulouts" class="info"/>
            </td>
            <td></td>
        </tr>
        {% if haulout_count > 0 %}
        {% for tuple in haulouts %}
        <tr>
            <td></td>
            <td>{{tuple.0}} ({{tuple.1|intcomma}}) </td>
            <td></td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td></td>
            <td>None Found</td>
            <td></td>
        </tr>
        {% endif %}
    </tbody>
</table>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Orca Critical Habitat</b>
                <img src="/media/wmm/img/info.png" id="info_orca" class="info"/>
            </td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            {% if orca_count == 0 %}
            <td>None Found</td>
            {% else %}
            <td>{{orca_area|floatformat:1}} sq miles ({{orca_perc|percentage:1}} of your Area)</td>
            {% endif %}
            <td></td>
        </tr>
    </tbody>
</table>

<h3>Plants</h3>
<p>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Kelp</b>
                <img src="/media/wmm/img/info.png" id="info_kelp" class="info"/>
            </td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            {% if kelp_count == 0 %}
            <td>None Found</td>
            {% else %}
            <td>{{kelp_area|floatformat:1}} sq miles ({{kelp_perc|percentage:1}} of your Area)</td>
            {% endif %}
            <td></td>
        </tr>
    </tbody>
</table>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td colspan="3"><b>Chlorophyll</b>
                <img src="/media/wmm/img/info.png" id="info_chlorophyll" class="info"/>
            </td>
        </tr>
        {% if chlorophyll_count > 0 %}
        {% for report in chlorophyll %}
        <tr>
            <td class="left">{{report.0}}</td>
            <td class="right">{{report.1|floatformat:1}} sq miles </td>
            <td class="right">({{report.2|percentage:1}} of available {{report.0}})</td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td></td>
            <td>None Found</td>
            <td></td>
        </tr>
        {% endif %}
    </tbody>
</table>

<h3>Invertebrates</h3>
<p>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Coral</b>
                <img src="/media/wmm/img/info.png" id="info_coral" class="info"/>
            </td>
            <td></td>
        </tr>
        {% if coral_count > 0 %}
        {% for tuple in coral_tuples %}
        <tr>
            <td class="left">{{tuple.0}}</td>
            <td class="right">{{tuple.1|floatformat:1}} cpue </td>
            <td class="right">({{tuple.2|floatformat:1}} sq miles)</td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td></td>
            <td>None Found</td>
            <td></td>
        </tr>
        {% endif %}
    </tbody>
</table>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Sponges</b>
                <img src="/media/wmm/img/info.png" id="info_sponges" class="info"/>
            </td>
            <td></td>
        </tr>
        {% if sponge_count > 0 %}
        {% for tuple in sponge_tuples %}
        <tr>
            <td class="left">{{tuple.0}}</td>
            <td class="right">{{tuple.1|floatformat:1}} cpue </td>
            <td class="right">({{tuple.2|floatformat:1}} sq miles)</td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td></td>
            <td>None Found</td>
            <td></td>
        </tr>
        {% endif %}
    </tbody>
</table>
<table  style='width:430px' class='analysis_container'>
    <tbody>
        <tr class="grey">
            <td></td>
            <td><b>Olympia Oysters</b>
                <img src="/media/wmm/img/info.png" id="info_oysters" class="info"/>
            </td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            {% if oyster_count == 0 %}
            <td>None Found</td>
            {% else %}
            <td>{{oyster_area|floatformat:1}} sq miles ({{oyster_perc|percentage:1}} of your Area)</td>
            {% endif %}
            <td></td>
        </tr>
    </tbody>
</table>

</div>


<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript">
function toggleDiv(divId, srcId) {
   $("#"+divId).toggle();
    if ($("#"+srcId).text() == 'Learn More') { 
        $("#"+srcId).text('Hide Text'); 
    } else { 
        $("#"+srcId).text('Learn More'); 
    }
}

</script>

{% endblock %}